#!/usr/local/bin/python3


# the flag is located at './flag.txt'
banner = """
  ================================================================  
  ================================================================  
  ================================================================  
  ================================================================  
     ---          --             --             --          ---     
     ---          --             --             --          ---     
     ---          --        +====--====+        --          ---     
     ---          --      +======--=======      --          ---     
     ---          --    +========--========+    --          ---     
     ---          --   %#########--#########%   --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          -- ============--============ --          ---     
     ---          -- ============--============ --          ---     
     ---          -- ============--============ --          ---     
     ---          -- %%%%%%%%%%%%--%%%%%%%%%%%% --          ---     
     ---          --%%%%%%%%%%%%%--%%%%%%%%%%%%%--          ---     
     ---          --%%%%%%%%%%%%%--%%%%%%%%%%%%%--          ---     
     ---          -- %%%%%%%%%%%%--%%%%%%%%%%%% --          ---     
     ---          --  %%%%%%%%%%%--%%%%%%%%%%%  --          ---     
     ---          --     %%%%%%%%--%%%%%%%%     --          ---     
     ---          --      %%%%%%%--%%%%%%%      --          ---     
     ---          --       %%%%%%--%%%%%%       --          ---     
     ---          --       %%%%%%--%%%%%%       --          ---     
     ---          -- +=====+%%%%%--%%%%%*=====+ --          ---     
     ---         +--========#%%%%--%%%%#+=======--+         ---     
     ---      +===--=========+#%%--%%%+=========--===+      ---     
     ---     =====--===========+%--%+===========--=====     ---     
     ---    #*****--*************--*************--******    ---     
     ---   %%%%%%%--%%%%%%%%%%%%%--%%%%%%%%%%%%%--%%%%%%%   ---     
     ---  %%%%%%%%--%%%%%%%%%%%%%--%%%%%%%%%%%%%--%%%%%%%%  ---     
  =========+++++++==+++++++++++++==+++++++++++++==+++++++=========  
  ================================================================  
  ================================================================  
  ================================================================  

  Given a limited character set and limited execution, try to read "flag.txt" from the system!
"""

# no letters for you!!!
def is_allowed(your_code):
  blacklist = set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ") 
  for c in your_code:
     if c in blacklist: 
        return False
  return True

MAX_CODE_SIZE = 300
def jail3():
    print("You made it here? Fine, I guess i'll just remove the entire alphabet from you...")
    your_code = input("> ")
    if(len(your_code) > MAX_CODE_SIZE):
        print("nope nope nope nope, too many characters: ", len(your_code))
    elif not is_allowed(your_code):
       print("no alphabet allowed!")
    else:
      print(f"not bad, no alphabet, and only {len(your_code)} characters, but how will you do without any builtins?")
      eval(your_code, {"__builtins__": {}})

if __name__ == "__main__":
    print(banner)
    jail3()
